{{{includes.navbar}}}

<div class="wrapperforfooter">
<div class="container-fluid monarch-container">

<div class="content">

            <div class="jumbotron">
                <div id="description">
                    {{#alerts}}
                    <div class="alert alert-warning alert-block top-alert">
                        {{{.}}}
                    </div>
                    {{/alerts}}
                    <img id="monarch-logo" class="downloadline" src="/image/logo.png"/>
                    <h1 class="downloadline">Monarch Phenotype Profile Analysis</h1>
                    <a class="downloadline downloadline-left btn btn-large btn-default btn-monarch-main monarch-feedback-dark"
                            href="mailto:info@monarchinitiative.org">Your feedback welcome!</a>

                    <p style="font-size:15px">
					The Phenotype Analysis Tool enables you search our database using the <a href="http://owlsim.org">
					OwlSim</a> Semantic Similarity analysis engine to find phenotypically similar diseases or
                    genes in a variety of organisms, then visualize their overlap.
					(<a href="/page/about">Read more</a> if you want to understand how this works.)
					</p>

					<p style="font-size:15px">
					<b>Instructions:   <a id="instructions-toggle" href="#instructions" style="font-weight:normal">Show/Hide</a> </b>
					<div id="instructions" style="display:none">
					  <ul style="font-size:15px; line-height:110%">
					    <li><i>Search</i></li>
					    <ul>
                          <li><b>Step 1</b>: create a Phenotype Profile by entering a set of phenotypes.</li>
                          <li><b>Step 2</b>: modify the settings for how to perform the comparison: <i>search</i> against the entire database
                              or <i>compare</i> against a selected set of genes.</li>
                          <li><b>Step 3</b>: Submit and view your results in the Results tab.</li>
                          <li><b>Step 4</b>: Repeat.  The list of phenotypes and genes stay
                              populated enabling you to iterate and refine your lists. You can start over by
                              hitting Reset.</li>
					    </ul>

					  </ul>
					</div>
                </div>
                
            </div>
            
            <div id="complete-info">

                <div class="row row-fluid">
                 <form class="form">
               
                    <div id="search-phenotypes" class="panel panel-default">
                      <div class="panel-heading">
                        <h4 class="text-center">Step 1: Select Phenotypes</h4>
                      </div>
                      <div class="panel-body">
                        <input id="analyze_auto_target" name="input_items" value="{{input_items}}" type="hidden"/>
                        <div id="analyze-searchlist" class="form-group">
                              <input id="analyze_auto_input" type="text" class="form-control" placeholder="Enter phenotype name into this autocomplete search"/>
                        </div>
                        
                        <div id="analyze-profile" class="form-group">
                            <ul id="analyze_auto_list" class="list-group">
                                <li id="analyze-empty-item" class="list-group-item">Empty: Add items using the input above.</li>
                            </ul>
                        </div>
                      </div>
                    </div>
    
                  <div class="panel panel-default">
                      <div class="panel-heading">
                        <h4 class="text-center">Step 2: Select Comparables</h4>
                      </div>
                      <div class="panel-body">
                        <div id="analyze-search">
                          <div class="pheno-radio-button">
                            <label id="pheno-search"><input id="srch" type="radio" checked="checked" value="search" name="mode"> Predefined Target Groups</label>

                          </div>

                          <div id="search-form-group">
                            <div class="row">
                              <div class="form-group col-xs-8" id="analyze-target">
                                <label for="target" class="control-label search-label search-text">Target Groups:</label>
                                <div>
                                  <select id="target" class="form-control" name="target_species">
                                    <option value="all" selected="selected" >All Species</option>
                                    <option value="10090">Mus musculus (genes)</option>
                                    <option value="7955">Danio rerio (genes)</option>
                                    <option value="9606">Homo sapiens (diseases)</option>
                                    <option value="7227">Drosophila melanogaster (genes)</option>
                                    <!-- <option value="6239">Caenorhabditis elegans (genes)</option> -->
                                  </select>
                                </div>
                              </div>
                              
                              
                              <div id="analyze-limit" class="form-group col-xs-4">
                          
                                <label for="analyze_limit_input" class="control-label search-label search-text">Limit of results:</label>
                                <div>
                                  <input class="form-control" id="analyze_limit_input" name="limit" type="text" value="{{limit}}"></input>
                                </div>
          
                              </div>
                              
                              
                            </div>

                          </div>
                          
                          
                          
                      </div>

                      <hr>
                      
                       <div id="analyze-compare">
                        <div class="pheno-radio-button">
                          <label id="pheno-compare"><input id="compare" type="radio" value="compare" name="mode"> Select genes using either the autocomplete and/or enter gene IDs directly using the text box</label>
                        </div>
                        <div id="compare-form-group">
                          <div id="gene-autocomplete" class="compare-text">
                              <input id="auto_gene_input" type="text" class="form-control" placeholder="Enter Gene Symbol here, e.g. LHX1" disabled>
                          </div>
                          
                          <div id="gene-text-area" class="compare-text">
                              Gene IDs:
                          </div>

                          <textarea id="gene-list" class="form-control" rows="3" placeholder="e.g. NCBIGene:3975, ENSEMBL:ENSG00000108753" name="gene_list" disabled></textarea>
                          
                          <div id="add_more_genes">
                          <div id="gene-shortcuts" class="compare-text">
                              <span class="small compare-text">
                                Given the above list of genes, include additional genes
                                based on relationship:
                              </span>
                          </div>
                          <div class="row">
                            <button id="ortholog" type="button" class="col-xs-offset-1 col-xs-4 btn monarch-btn" disabled>Orthologs</button>
                            <button id="paralog" type="button" class="col-xs-offset-2 col-xs-4 btn monarch-btn" disabled>Paralogs</button>
                          </div>
                          </div>
                          
                          
                        </div>
                        <div id="ajax-spinner">
                          <div class="ortholog-spinner" >
                            <div class="spinner-container container1">
                              <div class="circle1"></div>
                              <div class="circle2"></div>
                              <div class="circle3"></div>
                              <div class="circle4"></div>
                            </div>
                            <div class="spinner-container container2">
                              <div class="circle1"></div>
                              <div class="circle2"></div>
                              <div class="circle3"></div>
                              <div class="circle4"></div>
                            </div>
                            <div class="spinner-container container3">
                              <div class="circle1"></div>
                              <div class="circle2"></div>
                              <div class="circle3"></div>
                              <div class="circle4"></div>
                            </div>
                          </div>
                          <div id='fetching'>Fetching Genes...</div>
                        </div>
                        <div id='error-msg'>Error Fetching Genes</div>
                        <div id="ortholog-text-area" class="compare-text">Orthologs:<br>
                            <textarea id="ortholog-list" class="form-control" rows="2" placeholder="" name="ortholog_list" disabled></textarea>
                        </div>
                        <div id="paralog-text-area" class="compare-text">Paralogs:<br>
                            <textarea id="paralog-list" class="form-control" rows="2" placeholder="" name="paralog_list" disabled></textarea>
                        </div>
                      </div>
                      
                      
                      
                     </div>
                   </div>
                  

                      <button id="analyze-submit" type="submit" class="btn btn-primary " style="margin:5px auto; padding:20px 0; font-size:16px; font-weight:bold; width:100%;">Submit and view Phenogrid and Results Table Below <span class="glyphicon glyphicon-arrow-down"></span></button>

                  
                </form>
                </div>
            

            {{#hasInputItems}}
            <div class="row row-fluid">
                <div id="result" class="panel panel-default" style="margin-top:20px;">
                    
                    
                    
                      {{#hasTable}}
                      <div id ="phen_vis" style="padding:20px;"></div>

                      <div id="result-table">
                        <h3 class="downloadline">Results</h3>
                        <a href="{{{downloadURL}}}" class="btn btn-default downloadline downloadline-left monarch-blue">JSON</a>
                        
                        {{#hasResults}}

                              <div>{{{resultsTable}}}</div>
                          
                        {{/hasResults}}
                        {{^hasResults}}
                        <div class="text">Unfortunately, your search produced no results.</div>
                        {{/hasResults}}
                      </div>
                      {{/hasTable}}
                    
                </div>
            </div>
            <!-- this splitLabels shows the selected phenotyps -->
            <div id="splitLabels" style="display:none">{{splitLabels}}</div>
            {{/hasInputItems}}
            


</div>

</div>

</div> <!-- closes wrapperforfooter -->
{{{includes.footer}}}
